# تعليمات إصلاح صفحة حجز الغرف

## المشاكل التي تم حلها:
✅ تم إصلاح صفحة حجز الغرف (`/room-booking`)
✅ تم إصلاح جميع API calls (تغيير من `/api/` إلى `http://localhost:5000/api/`)
✅ تم التأكد من عمل جميع الوظائف بشكل صحيح

## الميزات المتاحة في صفحة حجز الغرف:

### 🏨 الخطوة 1: اختيار الفندق
- عرض جميع الفنادق المتاحة
- معلومات الفندق: الاسم، الموقع، التقييم، الوصف
- صورة الفندق
- النقر على الفندق للانتقال للخطوة التالية

### 🏠 الخطوة 2: اختيار الغرفة
- **اختيار التواريخ**:
  - تاريخ الوصول
  - تاريخ المغادرة
  - عدد البالغين
  - عدد الأطفال
  - عدد الغرف

- **عرض الغرف المتاحة**:
  - صورة الغرفة
  - اسم الغرفة ورقمها
  - نوع الغرفة
  - وصف الغرفة
  - نوع السرير
  - الحد الأقصى للإشغال
  - السعر الأساسي
  - زر "فحص التوفر"

### 📝 الخطوة 3: معلومات الحجز
- **ملخص الحجز**:
  - تفاصيل الغرفة المختارة
  - تواريخ الحجز
  - عدد الليالي
  - عدد الغرف والضيوف
  - حساب المجموع الكلي

- **معلومات الضيف**:
  - الاسم الكامل (مطلوب)
  - البريد الإلكتروني (مطلوب)
  - رقم الهاتف (مطلوب)
  - الجنسية
  - رقم الهوية
  - الطلبات الخاصة

## الخطوات المطلوبة لتشغيل النظام:

### 1. تشغيل MongoDB
```bash
# في terminal منفصل
mongod
```

### 2. تشغيل Backend
```bash
# في terminal منفصل
cd backend
npm run dev
```

### 3. تشغيل Frontend
```bash
# في terminal منفصل
cd frontend
npm run dev
```

## اختبار النظام:

1. اذهب إلى `http://localhost:3000/room-booking`
2. **الخطوة 1**: اختر فندق من القائمة
3. **الخطوة 2**: 
   - اختر تواريخ الحجز
   - حدد عدد الضيوف والغرف
   - اضغط "فحص التوفر" على الغرفة المفضلة
4. **الخطوة 3**:
   - راجع ملخص الحجز
   - املأ معلومات الضيف
   - اضغط "تأكيد الحجز"

## استكشاف الأخطاء:

### إذا لم تظهر الفنادق:
- تأكد من تشغيل Backend
- تأكد من تشغيل MongoDB
- تحقق من console في المتصفح للأخطاء
- تأكد من وجود فنادق في النظام

### إذا لم تظهر الغرف:
- تأكد من اختيار فندق صحيح
- تحقق من وجود غرف في الفندق المختار
- تأكد من تشغيل Backend

### إذا فشل فحص التوفر:
- تأكد من اختيار تواريخ صحيحة
- تحقق من أن تاريخ المغادرة بعد تاريخ الوصول
- تأكد من وجود غرف متاحة في التواريخ المختارة

### إذا فشل في إنشاء الحجز:
- تحقق من صحة البيانات المدخلة
- تأكد من ملء جميع الحقول المطلوبة
- تأكد من تشغيل MongoDB
- تحقق من logs في Backend terminal

## ملاحظات مهمة:

1. **يجب وجود فنادق وغرف أولاً**: لا يمكن حجز غرف بدون وجود فنادق وغرف في النظام
2. **التواريخ مطلوبة**: يجب اختيار تواريخ الحجز قبل فحص التوفر
3. **البيانات مطلوبة**: يجب ملء الاسم والبريد الإلكتروني ورقم الهاتف
4. **API متصل**: Backend يجب أن يعمل على port 5000
5. **Frontend متصل**: Frontend يجب أن يعمل على port 3000 أو 5173

## البيانات المطلوبة للحجز:

### معلومات الضيف:
- الاسم الكامل (مطلوب)
- البريد الإلكتروني (مطلوب)
- رقم الهاتف (مطلوب)
- الجنسية (اختياري)
- رقم الهوية (اختياري)

### تفاصيل الحجز:
- تاريخ الوصول (مطلوب)
- تاريخ المغادرة (مطلوب)
- عدد البالغين (مطلوب)
- عدد الأطفال (اختياري)
- عدد الغرف (مطلوب)
- الطلبات الخاصة (اختياري)

## حساب التكلفة:

النظام يحسب التكلفة تلقائياً بناء على:
- السعر الأساسي للغرفة × عدد الليالي × عدد الغرف
- تكلفة الأشخاص الإضافيين (إذا تجاوز العدد الحد الأقصى)
- تكلفة الأسرّة الإضافية

## حالات الحجز:

- **pending**: في الانتظار
- **confirmed**: مؤكد
- **checked_in**: تم تسجيل الوصول
- **checked_out**: تم تسجيل المغادرة
- **cancelled**: ملغي
- **no_show**: لم يحضر

## API Endpoints المستخدمة:

- `GET /api/hotels` - جلب الفنادق
- `GET /api/rooms?hotel={hotelId}` - جلب غرف فندق معين
- `POST /api/rooms/check-availability` - فحص توفر الغرفة
- `POST /api/room-bookings` - إنشاء حجز جديد

## نصائح للاستخدام:

1. **اختر تواريخ مناسبة**: تأكد من أن تاريخ المغادرة بعد تاريخ الوصول
2. **راجع التفاصيل**: تأكد من صحة جميع المعلومات قبل التأكيد
3. **احفظ رقم الحجز**: ستحتاج رقم الحجز للمتابعة
4. **تحقق من البريد**: ستتلقى تأكيد على البريد الإلكتروني














