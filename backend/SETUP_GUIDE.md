# ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุญุฌุฒ ูุงูุฏูุน ุงูุฅููุชุฑููู - Lamar Park

## ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุฅุนุฏุงุฏ ูุชุดุบูู ูุธุงู ุงูุญุฌุฒ ูุงูุฏูุน ุงูุฅููุชุฑููู ุงูุฌุฏูุฏ ููุดุฑูุน Lamar Park.

## ๐ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### ุงูุจุฑุงูุฌ ุงููุทููุจุฉ:
- Node.js (v16 ุฃู ุฃุญุฏุซ)
- npm ุฃู yarn
- MongoDB
- Git

### ุงูุญุณุงุจุงุช ุงููุทููุจุฉ:
- ุญุณุงุจ Stripe (ููุฏูุน ุงูุฅููุชุฑููู)
- ุญุณุงุจ Railway (ูููุดุฑ - ุงุฎุชูุงุฑู)

## ๐ง ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅุนุฏุงุฏ Stripe

#### ุฃ. ุฅูุดุงุก ุญุณุงุจ Stripe:
1. ุงุฐูุจ ุฅูู [stripe.com](https://stripe.com)
2. ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ
3. ุฃููู ุนูููุฉ ุงูุชุญูู ูู ุงููููุฉ

#### ุจ. ุงูุญุตูู ุนูู ููุงุชูุญ API:
1. ุงุฐูุจ ุฅูู Stripe Dashboard
2. ุงูุชูู ุฅูู Developers โ API keys
3. ุงูุณุฎ ุงูููุงุชูุญ ุงูุชุงููุฉ:
   - **Publishable key** (ูุจุฏุฃ ุจู `pk_test_` ุฃู `pk_live_`)
   - **Secret key** (ูุจุฏุฃ ุจู `sk_test_` ุฃู `sk_live_`)

#### ุฌ. ุฅุนุฏุงุฏ Webhook:
1. ุงุฐูุจ ุฅูู Developers โ Webhooks
2. ุงุถุบุท ุนูู "Add endpoint"
3. ุฃุฏุฎู URL: `https://your-domain.com/api/checkout/webhook`
4. ุงุฎุชุฑ ุงูุฃุญุฏุงุซ ุงูุชุงููุฉ:
   - `checkout.session.completed`
   - `payment_intent.succeeded`
   - `payment_intent.payment_failed`
5. ุงูุณุฎ Webhook secret

### 2. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฃ. MongoDB:
1. ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช MongoDB
2. ุงุญุตู ุนูู connection string
3. ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุฏุนู SSL

### 3. ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

#### ุฃ. Backend (.env):
```env
# Database Configuration
MONGO_URI=mongodb://localhost:27017/lamar
# ุฃู
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/lamar

# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_here

# Server Configuration
PORT=5000

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# Client URL (for Stripe redirects)
CLIENT_URL=http://localhost:3000
```

#### ุจ. Frontend (.env):
```env
# API Configuration
VITE_API_URL=http://localhost:5000/api

# Stripe Configuration
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# App Configuration
VITE_APP_NAME=Lamar Park
VITE_APP_VERSION=1.0.0
```

### 4. ุชุซุจูุช ุงูุชุจุนูุงุช

#### ุฃ. Backend:
```bash
cd lamarPark
npm install
```

#### ุจ. Frontend:
```bash
cd client
npm install
```

### 5. ุชุดุบูู ุงููุธุงู

#### ุฃ. ุชุดุบูู Backend:
```bash
# ูู ูุฌูุฏ ุงููุดุฑูุน ุงูุฑุฆูุณู
npm run dev
```

#### ุจ. ุชุดุบูู Frontend:
```bash
# ูู ูุฌูุฏ client
npm run dev
```

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ API:
ุงุณุชุฎุฏู Postman ุฃู ุฃู ุฃุฏุงุฉ ูุดุงุจูุฉ ูุงุฎุชุจุงุฑ ุงูููุงุท ุงูุชุงููุฉ:

#### ุฃ. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ:
```
POST http://localhost:5000/api/users/register
Content-Type: application/json

{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "123456",
  "phone": "+966 50 123 4567"
}
```

#### ุจ. ุญุณุงุจ ุงูุณุนุฑ:
```
POST http://localhost:5000/api/pricing/calculate
Content-Type: application/json

{
  "propertyId": "PROPERTY_ID",
  "checkIn": "2024-02-15",
  "checkOut": "2024-02-17"
}
```

#### ุฌ. ุฅูุดุงุก ุฌูุณุฉ ุฏูุน:
```
POST http://localhost:5000/api/checkout/create-session
Content-Type: application/json

{
  "propertyId": "PROPERTY_ID",
  "checkIn": "2024-02-15",
  "checkOut": "2024-02-17",
  "guests": 2,
  "guestInfo": {
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com",
    "phone": "+966 50 123 4567"
  },
  "totalPrice": 2400,
  "nights": 2
}
```

### 2. ุงุฎุชุจุงุฑ ุงูุฏูุน:
ุงุณุชุฎุฏู ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุชุงููุฉ:

#### ุจุทุงูุงุช ูุฌุงุญ ุงูุฏูุน:
- `4242 4242 4242 4242` - Visa
- `5555 5555 5555 4444` - Mastercard
- `3782 822463 10005` - American Express

#### ุจุทุงูุงุช ูุดู ุงูุฏูุน:
- `4000 0000 0000 0002` - ุฑูุถ ุนุงู
- `4000 0000 0000 9995` - ุฑูุถ ุจุณุจุจ ุฑุตูุฏ ุบูุฑ ูุงูู
- `4000 0000 0000 9987` - ุฑูุถ ุจุณุจุจ ุจุทุงูุฉ ููุชููุฉ ุงูุตูุงุญูุฉ

### 3. ุงุฎุชุจุงุฑ Webhook:
1. ุงุณุชุฎุฏู Stripe CLI ูุงุฎุชุจุงุฑ Webhook ูุญููุงู:
```bash
stripe listen --forward-to localhost:5000/api/checkout/webhook
```

2. ุฃู ุงุณุชุฎุฏู ngrok ูุฅูุดุงุก ููู:
```bash
ngrok http 5000
```

## ๐ ุงููุดุฑ ุนูู Railway

### 1. ุฅุนุฏุงุฏ Railway:
```bash
# ุชุซุจูุช Railway CLI
npm install -g @railway/cli

# ุชุณุฌูู ุงูุฏุฎูู
railway login

# ุชููุฆุฉ ุงููุดุฑูุน
railway init
```

### 2. ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ:
1. ุงุฐูุจ ุฅูู Railway Dashboard
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู Variables
4. ุฃุถู ุฌููุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ

### 3. ุงููุดุฑ:
```bash
railway up
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

#### 1. ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:
- ุชุฃูุฏ ูู ุตุญุฉ connection string
- ุชุฃูุฏ ูู ุฃู MongoDB ูุนูู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ

#### 2. ุฎุทุฃ ูู Stripe:
- ุชุฃูุฏ ูู ุตุญุฉ ููุงุชูุญ API
- ุชุฃูุฏ ูู ุฃู ุงูุญุณุงุจ ููุนู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช Webhook

#### 3. ุฎุทุฃ ูู CORS:
- ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช CORS ูู Backend
- ุชุญูู ูู URLs ุงููุณููุญ ุจูุง

#### 4. ุฎุทุฃ ูู Webhook:
- ุชุฃูุฏ ูู ุตุญุฉ Webhook secret
- ุชุญูู ูู ุฃู URL ุตุญูุญ
- ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุณุชูุจู POST requests

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุฑุงุฌุน ูููุงุช ุงูุณุฌูุงุช (logs)
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฎุฏูุงุช ุชุนูู
4. ุฑุงุฌุน ุชูุซูู Stripe

## ๐ ุงูุชุญุฏูุซุงุช

ููุชุญุฏูุซ ุฅูู ุฃุญุฏุซ ุฅุตุฏุงุฑ:
```bash
git pull origin main
npm install
cd client && npm install
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุฃูุงู**: ูุง ุชุดุงุฑู ููุงุชูุญ Stripe ูุน ุฃู ุดุฎุต
2. **ุงูุจูุฆุฉ**: ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ููุงุชูุญ ุงูุงุฎุชุจุงุฑ ูู ุงูุจูุฆุฉ ุงูุชุทููุฑูุฉ
3. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุงููุฑุงูุจุฉ**: ุฑุงูุจ ุณุฌูุงุช Stripe ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุดุงูู

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ุจูุงุณุทุฉ ูุฑูู ุชุทููุฑ Lamar Park** 